---
tags:
  - smart_ptr
  - oop
---
`unique_ptr` — это умный [[Указатели|указатель]] в C++, который обеспечивает владение и управление динамически выделенной памятью. Он гарантирует, что объект, на который он указывает, будет удален (освобожден) автоматически, когда `unique_ptr` выходит из [[Область видимости|области видимости]] или уничтожается. В отличие от обычного [[Указатели|указателя]], `unique_ptr` не может быть скопирован, но может быть перемещен, что позволяет передавать владение объектом.

### Основные особенности `unique_ptr`:

- **Эксклюзивное владение**: только один `unique_ptr` может владеть объектом в любой момент времени.
- **Безопасное управление памятью**: объект автоматически удаляется, когда `unique_ptr` выходит из [[Область видимости|области видимости]].
- **Перемещение**: можно передавать владение объектом другому `unique_ptr` с помощью операции перемещения (`std::move`).

```cpp
#include <iostream>
#include <memory>  // Для std::unique_ptr

class MyClass {
public:
    MyClass() { std::cout << "MyClass создан\n"; }
    ~MyClass() { std::cout << "MyClass удален\n"; }
    void DoSomething() { std::cout << "MyClass делает что-то\n"; }
};

int main() {
    // Создаем уникальный указатель на объект MyClass
    std::unique_ptr<MyClass> ptr1 = std::make_unique<MyClass>();

    // Используем объект через указатель
    ptr1->DoSomething();

    // Передаем владение другому уникальному указателю
    std::unique_ptr<MyClass> ptr2 = std::move(ptr1);

    // Теперь ptr1 пуст, а ptr2 владеет объектом
    if (!ptr1) {
        std::cout << "ptr1 не владеет объектом\n";
    }

    // ptr2 продолжает использовать объект
    ptr2->DoSomething();

    // Объект автоматически удалится, когда ptr2 выйдет из области видимости
    return 0;
}


/*
	MyClass создан
	MyClass делает что-то
	ptr1 не владеет объектом
	MyClass делает что-то
	MyClass удален
*/
```

[[!Язык программирования C++. Краткий курс|Источник]]
